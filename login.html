<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<!--<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">-->
<script src="js/jquery.min.js" type="text/javascript"></script>
<script src="bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
<script src="js/util.js"></script>
<style type="text/css">
html,body{font-family:"Helvetica Neue","Helvetica","Arial","sans-serif";}
</style>
<script type="text/javascript">
var alert_dom;
$(document).ready(
	function()
	{
		alert_dom = $('#myalert')
		$("#host").focus().select();
		$('#login_btn').click(function(){
			var host = $('#host').val();
			py.jsSetCfg('zkhost', host);
			var authtype = $('#auth_type').val()
			py.jsSetCfg('zkauthtype', authtype);
			var authvalue = $('#auth_value').val()
			py.jsSetCfg('zkauthval', authvalue);
			var obj = py.jsZkConnect(host)
			if(!empty(obj))
			{
				myalert("connect() failed: err="+obj)
				return;
			}
			obj = py.jsZkGetChildren('/')
			if(empty(obj.err))
			{
				window.location.href="main.html";
			}
			else
			{
				myalert("get_children() failed, err="+obj.err)
			}
		});
		var ohost = py.jsGetCfg('zkhost');
		if(!empty(ohost))
			$("#host").val(ohost);
		var oatype = py.jsGetCfg('zkauthtype');
		if(!empty(oatype))
			setAuthType(oatype);
	}
);
function setAuthType(type)
{
	$('#auth_type').val(type);
	$('#type_select_btn>span').eq(0).text(type);
}
function myalert(t)
{
	alert_dom.text(t).show(500);
}
</script>
</head>
<body>
<div class="container-fluid">
	<div class="row">
		<div class="col-sm-3"></div>
		<div class="col-sm-6">
			<form role="form">
				<div class="form-group">
					<label for="host">Host</label>
					<input type="text" class="form-control" id="host" placeholder="e.g. 127.0.0.1:2181,192.168.0.15:2181"/>
				</div>
				<div class="form-group">
					<label for="host">Auth</label>
					<div class="input-group" role="group" aria-lable="...">
						<div class="input-group-btn" role="group" id="type_select">
							<button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-expanded="false" id="type_select_btn"><span>world</span><span class="caret"></span></button>
							<ul class="dropdown-menu" role="menu" id="type_select_menu">
								<li><a href="javascript:setAuthType('world')">world</a></li>
								<li><a href="javascript:setAuthType('digest')">digest</a></li>
								<li><a href="javascript:setAuthType('ip')">ip</a></li>
							</ul>
							<input type="hidden" id="auth_type" value="world"/>
						</div>
						<input type="text" id="auth_value" class="form-control" placeholder="only for digest, e.g. user:password-digest"/>
					</div>
				</div>
				<div class="form-group">
					<button type="button" class="btn btn-primary form-control" id="login_btn">Login</button>
				</div>
				<div>
					<div class="alert alert-warning" role="alert" id="myalert" style="display:none"></div>
				</div>
			</form>
		</div>
		<div class="col-sm-3"></div>
	</div>
</div>
</body>
</html>